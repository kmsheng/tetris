!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=6)}([function(t,e,n){"use strict";e.__esModule=!0;var o=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e="empty"),this.id=t,this.label=e}return t.prototype.setEmpty=function(){return this.id=0,this.label="empty",this},t.prototype.isEmpty=function(){return"empty"===this.label&&0===this.id},t}();e.default=o},function(t,e,n){"use strict";e.__esModule=!0,e.TETROMINO_I={label:"I",coords:[[[1,0],[1,1],[1,2],[1,3]],[[0,1],[1,1],[2,1],[3,1]]]},e.TETROMINO_J={label:"J",coords:[[[0,0],[0,1],[0,2],[1,2]],[[0,1],[1,1],[2,0],[2,1]],[[0,0],[1,0],[1,1],[1,2]],[[0,0],[0,1],[1,0],[2,0]]]},e.TETROMINO_L={label:"L",coords:[[[0,0],[0,1],[0,2],[1,0]],[[0,0],[0,1],[1,1],[2,1]],[[0,2],[1,0],[1,1],[1,2]],[[0,0],[1,0],[2,0],[2,1]]]},e.TETROMINO_O={label:"O",coords:[[[0,0],[0,1],[1,0],[1,1]]]},e.TETROMINO_S={label:"S",coords:[[[0,0],[1,0],[1,1],[2,1]],[[0,1],[0,2],[1,0],[1,1]]]},e.TETROMINO_T={label:"T",coords:[[[0,0],[0,1],[0,2],[1,1]],[[0,1],[1,0],[1,1],[2,1]],[[0,1],[1,0],[1,1],[1,2]],[[0,0],[1,0],[1,1],[2,0]]]},e.TETROMINO_Z={label:"Z",coords:[[[0,0],[0,1],[1,1],[1,2]],[[0,1],[1,0],[1,1],[2,0]]]}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){var e=t.slice(0),n=e.length;if(n<2)return e;for(;n;){for(var o=Math.floor(Math.random()*n--),r=e[o];o<n;)e[o]=e[++o];e[o]=r}return e}},function(t,e,n){"use strict";var o=Object.prototype.hasOwnProperty,r="~";function i(){}function s(t,e,n,o,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new function(t,e,n){this.fn=t,this.context=e,this.once=n||!1}(n,o||t,i),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],s]:t._events[c].push(s):(t._events[c]=s,t._eventsCount++),t}function c(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)o.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,s=new Array(i);o<i;o++)s[o]=n[o].fn;return s},a.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,o,i,s){var c=r?r+t:t;if(!this._events[c])return!1;var a,u,l=this._events[c],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,o),!0;case 5:return l.fn.call(l.context,e,n,o,i),!0;case 6:return l.fn.call(l.context,e,n,o,i,s),!0}for(u=1,a=new Array(h-1);u<h;u++)a[u-1]=arguments[u];l.fn.apply(l.context,a)}else{var p,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,n);break;case 4:l[u].fn.call(l[u].context,e,n,o);break;default:if(!a)for(p=1,a=new Array(h-1);p<h;p++)a[p-1]=arguments[p];l[u].fn.apply(l[u].context,a)}}return!0},a.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,n,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return c(this,i),this;var s=this._events[i];if(s.fn)s.fn!==e||o&&!s.once||n&&s.context!==n||c(this,i);else{for(var a=0,u=[],l=s.length;a<l;a++)(s[a].fn!==e||o&&!s[a].once||n&&s[a].context!==n)&&u.push(s[a]);u.length?this._events[i]=1===u.length?u[0]:u:c(this,i)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&c(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a},function(t,e,n){"use strict";e.__esModule=!0;var o=n(3),r=n(2),i=n(1),s=n(0),c=function(){function t(t){this.moves=0,this.isStarted=!1,this.level=1,this.score=0,this.pieceCount=0,this.delay=1e3,this.tetrominoes=[i.TETROMINO_O,i.TETROMINO_J,i.TETROMINO_L,i.TETROMINO_S,i.TETROMINO_Z,i.TETROMINO_T,i.TETROMINO_I],this.option=t,this.eventEmitter=new o.EventEmitter}return t.prototype.draw=function(){},t.prototype.initMatrix=function(){var t=this.option,e=t.width,n=t.height;this.matrix=[];for(var o=0;o<n;o++){Array.isArray(this.matrix[o])||(this.matrix[o]=[]);for(var r=0;r<e;r++)this.matrix[o][r]=new s.default}},t.prototype.setNewBlock=function(){var t=r.default(this.tetrominoes)[0],e=r.default(t.coords)[0];this.pieceCount+=1,this.currentPiece={id:this.pieceCount,tetromino:t,coord:e,pos:{x:4,y:0},getPosArr:function(t,e){return void 0===t&&(t=this.pos),void 0===e&&(e=this.coord),e.map(function(e){var n=e[0],o=e[1];return{x:t.x+n,y:t.y+o}})},rotateIndex:0}},t.prototype.canPlaceBlocks=function(t){var e=this;return t.every(function(t){if(!(t.y in e.matrix))return!1;var n=e.matrix[t.y][t.x];return!(!n||!n.isEmpty())||!(!n||n.id!==e.currentPiece.id)})},t.prototype.eraseBlocks=function(t){this.matrix.map(function(e){return e.map(function(e){return e.id===t?e.setEmpty():e})})},t.prototype.canThrowNewBlock=function(){var t=this;return this.currentPiece.getPosArr().every(function(e){return t.matrix[e.y][e.x].isEmpty()})},t.prototype.setBlocks=function(t,e){var n=this;t.forEach(function(t){var o=t.x,r=t.y;n.matrix[r][o]=new s.default(e.id,e.tetromino.label)})},t.prototype.clearRowIfNeeded=function(){var t=this.matrix,e=this.level,n=this.option,o=n.width,r=n.height,i=t.filter(function(t){return t.every(function(t){return!t.isEmpty()})}).length*o*e,s=t.filter(function(t){return t.some(function(t){return t.isEmpty()})}),c=r-s.length;this.matrix=t.map(function(t,e){return e<c?t.map(function(t){return t.setEmpty()}):s[e-c]}),this.score+=i,this.eventEmitter.emit("change")},t.prototype.changeLevelIfNeeded=function(){var t=Math.ceil(this.moves/20);if(this.level!=t){this.level=t;var e=1e3-50*t;this.delay=e<=400?400:e,this.eventEmitter.emit("change")}},t.prototype.throwNewBlock=function(){var t=this;this.timer=setInterval(function(){var e=t.currentPiece,n=e.getPosArr();if(t.eraseBlocks(e.id),t.canPlaceBlocks(n)){t.moves+=1,t.changeLevelIfNeeded(),t.setBlocks(n,e);var o=e.getPosArr({x:e.pos.x,y:e.pos.y+1});if(t.canPlaceBlocks(o))e.pos.y+=1;else{if(clearInterval(t.timer),t.setNewBlock(),t.canThrowNewBlock())return t.clearRowIfNeeded(),void t.throwNewBlock();t.gameOver()}}else clearInterval(t.timer)},this.delay)},t.prototype.moveCurrentPieceToLeft=function(){var t=this.currentPiece,e=t.getPosArr({x:t.pos.x-1,y:t.pos.y});this.canPlaceBlocks(e)&&(this.eraseBlocks(t.id),t.pos.x-=1,this.setBlocks(e,t))},t.prototype.moveCurrentPieceToRight=function(){var t=this.currentPiece,e=t.getPosArr({x:t.pos.x+1,y:t.pos.y});this.canPlaceBlocks(e)&&(this.eraseBlocks(t.id),t.pos.x+=1,this.setBlocks(e,t))},t.prototype.moveCurrentPieceToBottom=function(){var t=this.currentPiece,e=t.getPosArr({x:t.pos.x,y:t.pos.y+1});this.canPlaceBlocks(e)&&(this.eraseBlocks(t.id),t.pos.y+=1,this.setBlocks(e,t))},t.prototype.rotateCurrentPiece=function(){var t=this.currentPiece,e=(t.rotateIndex+1)%t.tetromino.coords.length,n=t.tetromino.coords[e],o=t.getPosArr(t.pos,n);this.canPlaceBlocks(o)&&(this.eraseBlocks(t.id),t.rotateIndex=e,t.coord=t.tetromino.coords[e],this.setBlocks(o,t))},t.prototype.on=function(t,e){this.eventEmitter.on(t,e)},t.prototype.destroy=function(){this.eventEmitter.removeAllListeners()},t.prototype.start=function(){this.isStarted=!0,this.eventEmitter.emit("gamestart"),this.initMatrix(),this.setNewBlock(),this.throwNewBlock()},t.prototype.gameOver=function(){clearInterval(this.timer),this.isStarted=!1,this.eventEmitter.emit("gameover")},t}();e.default=c},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0;var i=function(t){function e(e,n){var o=t.call(this,n)||this;return o.isAnimating=!1,o.lastHtml="",o.element=e,o.addEventListeners(),o}return r(e,t),e.prototype.draw=function(){var t=this.element,e=this.option,n=(e.width,e.height,this.matrix.map(function(t){return"<tr>"+t.map(function(t){return'<td class="color-'+t.label+'"></td>'}).join("")+"</tr>"}).join(""));this.lastHtml!==n&&(t.innerHTML=n,this.lastHtml=n)},e.prototype.addEventListeners=function(){this.bindedHandleKeyDown=this.handleKeyDown.bind(this),document.addEventListener("keydown",this.bindedHandleKeyDown,!1)},e.prototype.handleKeyDown=function(t){if(this.isStarted){var e=t.code;"ArrowLeft"===e?this.moveCurrentPieceToLeft():"ArrowRight"===e?this.moveCurrentPieceToRight():"ArrowDown"===e?this.moveCurrentPieceToBottom():["ArrowUp","Space"].includes(e)&&this.rotateCurrentPiece()}},e.prototype.removeEventListeners=function(){document.removeEventListener("keydown",this.bindedHandleKeyDown,!1)},e.prototype.startAnimationLoop=function(){var t=this;t.isAnimating=!0,function e(){t.isAnimating&&(t.draw(),requestAnimationFrame(e))}()},e.prototype.stopAnimationLoop=function(){this.isAnimating=!1},e.prototype.start=function(){t.prototype.start.call(this),this.startAnimationLoop()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.stopAnimationLoop(),this.removeEventListeners()},e}(n(4).default);e.default=i},function(t,e,n){"use strict";e.__esModule=!0;var o=n(5),r=document.getElementById("matrix"),i=new o.default(r,{width:10,height:20}),s=document.getElementById("page-home"),c=document.getElementById("page-game-over"),a=document.getElementById("btn-start"),u=document.getElementById("btn-play-again"),l=document.getElementById("topbar"),h=document.getElementById("topbar-level"),p=document.getElementById("topbar-score"),f=document.getElementById("pad-score");i.on("gamestart",function(){h.textContent="Level: "+i.level,p.textContent="Score: "+i.score}),i.on("change",function(){h.textContent="Level: "+i.level,p.textContent="Score: "+i.score}),i.on("gameover",function(){c.classList.remove("hidden"),f.innerHTML="Your Score: "+i.score});var d=function(){i.start(),l.classList.remove("hidden"),s.classList.add("hidden"),c.classList.add("hidden")};a.addEventListener("click",d,!1),u.addEventListener("click",d,!1)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hdHJpeC1ibG9jay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdGV0cm9taW5vZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NodWZmbGUudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2V2ZW50ZW1pdHRlcjMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RldHJpcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdGV0cmlzLWRvbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIk1hdHJpeEJsb2NrIiwiaWQiLCJsYWJlbCIsInRoaXMiLCJzZXRFbXB0eSIsImlzRW1wdHkiLCJURVRST01JTk9fSSIsImNvb3JkcyIsIlRFVFJPTUlOT19KIiwiVEVUUk9NSU5PX0wiLCJURVRST01JTk9fTyIsIlRFVFJPTUlOT19TIiwiVEVUUk9NSU5PX1QiLCJURVRST01JTk9fWiIsImEiLCJhcnIiLCJzbGljZSIsImxlbmd0aCIsInJhbmRvbUluZGV4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicmFuZG9tRWxlbWVudCIsImhhcyIsInByZWZpeCIsIkV2ZW50cyIsImFkZExpc3RlbmVyIiwiZW1pdHRlciIsImV2ZW50IiwiZm4iLCJjb250ZXh0Iiwib25jZSIsIlR5cGVFcnJvciIsImxpc3RlbmVyIiwiZXZ0IiwiX2V2ZW50cyIsInB1c2giLCJfZXZlbnRzQ291bnQiLCJjbGVhckV2ZW50IiwiRXZlbnRFbWl0dGVyIiwiY3JlYXRlIiwiX19wcm90b19fIiwiZXZlbnROYW1lcyIsImV2ZW50cyIsIm5hbWVzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiY29uY2F0IiwibGlzdGVuZXJzIiwiaGFuZGxlcnMiLCJlZSIsIkFycmF5IiwibGlzdGVuZXJDb3VudCIsImVtaXQiLCJhMSIsImEyIiwiYTMiLCJhNCIsImE1IiwiYXJncyIsImxlbiIsImFyZ3VtZW50cyIsInJlbW92ZUxpc3RlbmVyIiwidW5kZWZpbmVkIiwiYXBwbHkiLCJqIiwib24iLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJvZmYiLCJwcmVmaXhlZCIsImV2ZW50ZW1pdHRlcjNfMSIsInNodWZmbGVfMSIsInRldHJvbWlub2VzXzEiLCJtYXRyaXhfYmxvY2tfMSIsIlRldHJpcyIsIm9wdGlvbiIsIm1vdmVzIiwiaXNTdGFydGVkIiwibGV2ZWwiLCJzY29yZSIsInBpZWNlQ291bnQiLCJkZWxheSIsInRldHJvbWlub2VzIiwiZXZlbnRFbWl0dGVyIiwiZHJhdyIsImluaXRNYXRyaXgiLCJfYSIsIndpZHRoIiwiaGVpZ2h0IiwibWF0cml4IiwiaXNBcnJheSIsInNldE5ld0Jsb2NrIiwicmFuZG9tQmxvY2siLCJjb29yZCIsImN1cnJlbnRQaWVjZSIsInRldHJvbWlubyIsInBvcyIsIngiLCJ5IiwiZ2V0UG9zQXJyIiwibWFwIiwicm90YXRlSW5kZXgiLCJjYW5QbGFjZUJsb2NrcyIsInBvc0FyciIsIl90aGlzIiwiZXZlcnkiLCJibG9jayIsImVyYXNlQmxvY2tzIiwicm93IiwiY2FuVGhyb3dOZXdCbG9jayIsInNldEJsb2NrcyIsInBpZWNlIiwiZm9yRWFjaCIsImNsZWFyUm93SWZOZWVkZWQiLCJfYiIsInNjb3JlVGhpc1JvdW5kIiwiZmlsdGVyIiwiY2xlYXJlZFJvd3MiLCJzb21lIiwic3RhcnQiLCJjaGFuZ2VMZXZlbElmTmVlZGVkIiwibmV3TGV2ZWwiLCJjZWlsIiwibmV3RGVsYXkiLCJ0aHJvd05ld0Jsb2NrIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsIm5leHRQb3NBcnIiLCJjbGVhckludGVydmFsIiwiZ2FtZU92ZXIiLCJtb3ZlQ3VycmVudFBpZWNlVG9MZWZ0IiwibW92ZUN1cnJlbnRQaWVjZVRvUmlnaHQiLCJtb3ZlQ3VycmVudFBpZWNlVG9Cb3R0b20iLCJyb3RhdGVDdXJyZW50UGllY2UiLCJuZXh0Um90YXRlSW5kZXgiLCJuZXh0Q29vcmQiLCJmdW5jIiwiZGVzdHJveSIsIlRldHJpc0RvbSIsIl9zdXBlciIsImVsZW1lbnQiLCJvcHRpb25zIiwiaXNBbmltYXRpbmciLCJsYXN0SHRtbCIsImFkZEV2ZW50TGlzdGVuZXJzIiwiX19leHRlbmRzIiwiaHRtbCIsImpvaW4iLCJpbm5lckhUTUwiLCJiaW5kZWRIYW5kbGVLZXlEb3duIiwiaGFuZGxlS2V5RG93biIsImJpbmQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb2RlIiwiaW5jbHVkZXMiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzdGFydEFuaW1hdGlvbkxvb3AiLCJzZWxmIiwibG9vcCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInN0b3BBbmltYXRpb25Mb29wIiwidGV0cmlzX2RvbV8xIiwiZ2V0RWxlbWVudEJ5SWQiLCJnYW1lIiwicGFnZUhvbWUiLCJwYWdlR2FtZU92ZXIiLCJidG5TdGFydCIsImJ0blBsYXlBZ2FpbiIsInRvcGJhciIsInRvcGJhckxldmVsIiwidG9wYmFyU2NvcmUiLCJwYWRTY29yZSIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwic3RhcnRHYW1lIiwiYWRkIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFqQixHQUNBWSxPQUFBQyxlQUFBYixFQUFBLGNBQWlEa0IsT0FBQSxLQUlqRHBCLEVBQUFxQixFQUFBLFNBQUFsQixHQUNBLElBQUFTLEVBQUFULEtBQUFtQixXQUNBLFdBQTJCLE9BQUFuQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBVSxFQUFBQyxHQUFzRCxPQUFBVixPQUFBVyxVQUFBQyxlQUFBbkIsS0FBQWdCLEVBQUFDLElBR3REeEIsRUFBQTJCLEVBQUEsU0FJQTNCLElBQUE0QixFQUFBLGtEQ25FQSxJQUFBQyxFQUFBLFdBS0UsU0FBQUEsRUFBWUMsRUFBUUMsUUFBUixJQUFBRCxNQUFBLFFBQVEsSUFBQUMsTUFBQSxTQUNsQkMsS0FBS0YsR0FBS0EsRUFDVkUsS0FBS0QsTUFBUUEsRUFZakIsT0FURUYsRUFBQUosVUFBQVEsU0FBQSxXQUdFLE9BRkFELEtBQUtGLEdBQUssRUFDVkUsS0FBS0QsTUFBUSxRQUNOQyxNQUdUSCxFQUFBSixVQUFBUyxRQUFBLFdBQ0UsTUFBUSxVQUFZRixLQUFLRCxPQUFXLElBQU1DLEtBQUtGLElBRW5ERCxFQW5CQSw2RENTYTNCLEVBQUFpQyxhQUNYSixNQUFPLElBQ1BLLFVBQ0ksRUFBRyxJQUFLLEVBQUcsSUFBSyxFQUFHLElBQUssRUFBRyxNQUMzQixFQUFHLElBQUssRUFBRyxJQUFLLEVBQUcsSUFBSyxFQUFHLE1BU3BCbEMsRUFBQW1DLGFBQ1hOLE1BQU8sSUFDUEssVUFDSSxFQUFHLElBQUssRUFBRyxJQUFLLEVBQUcsSUFBSyxFQUFHLE1BQzNCLEVBQUcsSUFBSyxFQUFHLElBQUssRUFBRyxJQUFLLEVBQUcsTUFDM0IsRUFBRyxJQUFLLEVBQUcsSUFBSyxFQUFHLElBQUssRUFBRyxNQUMzQixFQUFHLElBQUssRUFBRyxJQUFLLEVBQUcsSUFBSyxFQUFHLE1BU3BCbEMsRUFBQW9DLGFBQ1hQLE1BQU8sSUFDUEssVUFDSSxFQUFHLElBQUssRUFBRyxJQUFLLEVBQUcsSUFBSyxFQUFHLE1BQzNCLEVBQUcsSUFBSyxFQUFHLElBQUssRUFBRyxJQUFLLEVBQUcsTUFDM0IsRUFBRyxJQUFLLEVBQUcsSUFBSyxFQUFHLElBQUssRUFBRyxNQUMzQixFQUFHLElBQUssRUFBRyxJQUFLLEVBQUcsSUFBSyxFQUFHLE1BUXBCbEMsRUFBQXFDLGFBQ1hSLE1BQU8sSUFDUEssVUFDSSxFQUFHLElBQUssRUFBRyxJQUFLLEVBQUcsSUFBSyxFQUFHLE1BU3BCbEMsRUFBQXNDLGFBQ1hULE1BQU8sSUFDUEssVUFDSSxFQUFHLElBQUssRUFBRyxJQUFLLEVBQUcsSUFBSyxFQUFHLE1BQzNCLEVBQUcsSUFBSyxFQUFHLElBQUssRUFBRyxJQUFLLEVBQUcsTUFTcEJsQyxFQUFBdUMsYUFDWFYsTUFBTyxJQUNQSyxVQUNJLEVBQUcsSUFBSyxFQUFHLElBQUssRUFBRyxJQUFLLEVBQUcsTUFDM0IsRUFBRyxJQUFLLEVBQUcsSUFBSyxFQUFHLElBQUssRUFBRyxNQUMzQixFQUFHLElBQUssRUFBRyxJQUFLLEVBQUcsSUFBSyxFQUFHLE1BQzNCLEVBQUcsSUFBSyxFQUFHLElBQUssRUFBRyxJQUFLLEVBQUcsTUFTcEJsQyxFQUFBd0MsYUFDWFgsTUFBTyxJQUNQSyxVQUNJLEVBQUcsSUFBSyxFQUFHLElBQUssRUFBRyxJQUFLLEVBQUcsTUFD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LGVBQWUsZ0JBQ3RDUSxFQUFjcEIsU0FBU1ksZUFBZSxnQkFDdENTLEVBQVdyQixTQUFTWSxlQUFlLGFBRXpDQyxFQUFLbkcsR0FBRyxZQUFhLFdBQ25CeUcsRUFBWUcsWUFBYyxVQUFVVCxFQUFLdkYsTUFDekM4RixFQUFZRSxZQUFjLFVBQVVULEVBQUt0RixRQUczQ3NGLEVBQUtuRyxHQUFHLFNBQVUsV0FDaEJ5RyxFQUFZRyxZQUFjLFVBQVVULEVBQUt2RixNQUN6QzhGLEVBQVlFLFlBQWMsVUFBVVQsRUFBS3RGLFFBRzNDc0YsRUFBS25HLEdBQUcsV0FBWSxXQUNsQnFHLEVBQWFRLFVBQVVDLE9BQU8sVUFDOUJILEVBQVN6QixVQUFZLGVBQWVpQixFQUFLdEYsUUFHM0MsSUFBTWtHLEVBQVksV0FDaEJaLEVBQUs5QyxRQUNMbUQsRUFBT0ssVUFBVUMsT0FBTyxVQUN4QlYsRUFBU1MsVUFBVUcsSUFBSSxVQUN2QlgsRUFBYVEsVUFBVUcsSUFBSSxXQUc3QlYsRUFBU2YsaUJBQWlCLFFBQVN3QixHQUFXLEdBQzlDUixFQUFhaEIsaUJBQWlCLFFBQVN3QixHQUFXIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9kaXN0L1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNik7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNYXRyaXhCbG9jayB7XG5cbiAgaWQ6IG51bWJlcjtcbiAgbGFiZWw6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihpZCA9IDAsIGxhYmVsID0gJ2VtcHR5Jykge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLmxhYmVsID0gbGFiZWw7XG4gIH1cblxuICBzZXRFbXB0eSgpIHtcbiAgICB0aGlzLmlkID0gMDtcbiAgICB0aGlzLmxhYmVsID0gJ2VtcHR5JztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGlzRW1wdHkoKSB7XG4gICAgcmV0dXJuICgnZW1wdHknID09PSB0aGlzLmxhYmVsKSAmJiAoMCA9PT0gdGhpcy5pZCk7XG4gIH1cbn1cbiIsImltcG9ydCB7UG9pbnQyZCwgVGV0cm9taW5vfSBmcm9tICcuL3R5cGVzJztcblxuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVGV0cmlzI1RldHJvbWlub19jb2xvcnNcbi8qKlxuICogICAgICAgICAgICAg5Y+jXG4gKiDlj6Plj6Plj6Plj6MgPT4g5Y+jXG4gKiAgICAgICAgICAgICDlj6NcbiAqICAgICAgICAgICAgIOWPo1xuICoqL1xuZXhwb3J0IGNvbnN0IFRFVFJPTUlOT19JOiBUZXRyb21pbm8gPSB7XG4gIGxhYmVsOiAnSScsXG4gIGNvb3JkczogW1xuICAgIFtbMSwgMF0sIFsxLCAxXSwgWzEsIDJdLCBbMSwgM11dLFxuICAgIFtbMCwgMV0sIFsxLCAxXSwgWzIsIDFdLCBbMywgMV1dLFxuICBdXG59O1xuXG4vKipcbiAqIOWPo+WPo+WPoyAgICAgIOWPoyAgICDlj6MgICAgICAgIOWPo+WPo1xuICogICAgIOWPoyA9PiAgIOWPoyA9PiDlj6Plj6Plj6MgPT4g5Y+jXG4gKiAgICAgICAgICAg5Y+j5Y+jICAgICAgICAgICAgICDlj6NcbiAqKi9cbmV4cG9ydCBjb25zdCBURVRST01JTk9fSjogVGV0cm9taW5vID0ge1xuICBsYWJlbDogJ0onLFxuICBjb29yZHM6IFtcbiAgICBbWzAsIDBdLCBbMCwgMV0sIFswLCAyXSwgWzEsIDJdXSxcbiAgICBbWzAsIDFdLCBbMSwgMV0sIFsyLCAwXSwgWzIsIDFdXSxcbiAgICBbWzAsIDBdLCBbMSwgMF0sIFsxLCAxXSwgWzEsIDJdXSxcbiAgICBbWzAsIDBdLCBbMCwgMV0sIFsxLCAwXSwgWzIsIDBdXVxuICBdXG59O1xuXG4vKipcbiAqIOWPo+WPo+WPoyAgICDlj6Plj6MgICAgICAgIOWPoyAgICDlj6NcbiAqIOWPoyAgICAgPT4gICDlj6MgPT4g5Y+j5Y+j5Y+jID0+IOWPo1xuICogICAgICAgICAgICAg5Y+jICAgICAgICAgICAgICDlj6Plj6NcbiAqKi9cbmV4cG9ydCBjb25zdCBURVRST01JTk9fTDogVGV0cm9taW5vID0ge1xuICBsYWJlbDogJ0wnLFxuICBjb29yZHM6IFtcbiAgICBbWzAsIDBdLCBbMCwgMV0sIFswLCAyXSwgWzEsIDBdXSxcbiAgICBbWzAsIDBdLCBbMCwgMV0sIFsxLCAxXSwgWzIsIDFdXSxcbiAgICBbWzAsIDJdLCBbMSwgMF0sIFsxLCAxXSwgWzEsIDJdXSxcbiAgICBbWzAsIDBdLCBbMSwgMF0sIFsyLCAwXSwgWzIsIDFdXVxuICBdXG59O1xuXG4vKipcbiAqIOWPo+WPo1xuICog5Y+j5Y+jXG4gKiovXG5leHBvcnQgY29uc3QgVEVUUk9NSU5PX086IFRldHJvbWlubyA9IHtcbiAgbGFiZWw6ICdPJyxcbiAgY29vcmRzOiBbXG4gICAgW1swLCAwXSwgWzAsIDFdLCBbMSwgMF0sIFsxLCAxXV1cbiAgXVxufTtcblxuLyoqXG4gKiAgIOWPo+WPoyAgICDlj6NcbiAqIOWPo+WPoyAgID0+IOWPo+WPo1xuICogICAgICAgICAgICAg5Y+jXG4gKiovXG5leHBvcnQgY29uc3QgVEVUUk9NSU5PX1M6IFRldHJvbWlubyA9IHtcbiAgbGFiZWw6ICdTJyxcbiAgY29vcmRzOiBbXG4gICAgW1swLCAwXSwgWzEsIDBdLCBbMSwgMV0sIFsyLCAxXV0sXG4gICAgW1swLCAxXSwgWzAsIDJdLCBbMSwgMF0sIFsxLCAxXV1cbiAgXVxufTtcblxuLyoqXG4gKiDlj6Plj6Plj6MgPT4gICDlj6MgPT4gICDlj6MgICA9PiDlj6NcbiAqICAg5Y+jICAgICAg5Y+j5Y+jICAgIOWPo+WPo+WPoyAgICDlj6Plj6NcbiAqICAgICAgICAgICAgIOWPoyAgICAgICAgICAgICAg5Y+jXG4gKiovXG5leHBvcnQgY29uc3QgVEVUUk9NSU5PX1Q6IFRldHJvbWlubyA9IHtcbiAgbGFiZWw6ICdUJyxcbiAgY29vcmRzOiBbXG4gICAgW1swLCAwXSwgWzAsIDFdLCBbMCwgMl0sIFsxLCAxXV0sXG4gICAgW1swLCAxXSwgWzEsIDBdLCBbMSwgMV0sIFsyLCAxXV0sXG4gICAgW1swLCAxXSwgWzEsIDBdLCBbMSwgMV0sIFsxLCAyXV0sXG4gICAgW1swLCAwXSwgWzEsIDBdLCBbMSwgMV0sIFsyLCAwXV1cbiAgXVxufTtcblxuLyoqXG4gKiDlj6Plj6MgICAgICAgICDlj6NcbiAqICAg5Y+j5Y+jID0+ICDlj6Plj6NcbiAqICAgICAgICAgICAg5Y+jXG4gKiovXG5leHBvcnQgY29uc3QgVEVUUk9NSU5PX1o6IFRldHJvbWlubyA9IHtcbiAgbGFiZWw6ICdaJyxcbiAgY29vcmRzOiBbXG4gICAgW1swLCAwXSwgWzAsIDFdLCBbMSwgMV0sIFsxLCAyXV0sXG4gICAgW1swLCAxXSwgWzEsIDBdLCBbMSwgMV0sIFsyLCAwXV1cbiAgXVxufTtcbiIsIi8vIGh0dHBzOi8vYm9zdC5vY2tzLm9yZy9taWtlL3NodWZmbGUvY29tcGFyZS5odG1sXG4vLyBodHRwczovL2dpdGh1Yi5jb20vRGFwbGllL2tudXRoLXNodWZmbGVcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNodWZmbGU8VD4oYTogVFtdKTogVFtdIHtcblxuICBjb25zdCBhcnIgPSBhLnNsaWNlKDApO1xuICBsZXQgbGVuZ3RoID0gYXJyLmxlbmd0aDtcblxuICBpZiAobGVuZ3RoIDwgMikge1xuICAgIHJldHVybiBhcnI7XG4gIH1cblxuICB3aGlsZSAobGVuZ3RoKSB7XG5cbiAgICBsZXQgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsZW5ndGgtLSk7XG4gICAgbGV0IHJhbmRvbUVsZW1lbnQgPSBhcnJbcmFuZG9tSW5kZXhdO1xuXG4gICAgd2hpbGUgKHJhbmRvbUluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICBhcnJbcmFuZG9tSW5kZXhdID0gYXJyWysrcmFuZG9tSW5kZXhdO1xuICAgIH1cblxuICAgIGFycltyYW5kb21JbmRleF0gPSByYW5kb21FbGVtZW50O1xuICB9XG5cbiAgcmV0dXJuIGFycjtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHlcbiAgLCBwcmVmaXggPSAnfic7XG5cbi8qKlxuICogQ29uc3RydWN0b3IgdG8gY3JlYXRlIGEgc3RvcmFnZSBmb3Igb3VyIGBFRWAgb2JqZWN0cy5cbiAqIEFuIGBFdmVudHNgIGluc3RhbmNlIGlzIGEgcGxhaW4gb2JqZWN0IHdob3NlIHByb3BlcnRpZXMgYXJlIGV2ZW50IG5hbWVzLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gRXZlbnRzKCkge31cblxuLy9cbi8vIFdlIHRyeSB0byBub3QgaW5oZXJpdCBmcm9tIGBPYmplY3QucHJvdG90eXBlYC4gSW4gc29tZSBlbmdpbmVzIGNyZWF0aW5nIGFuXG4vLyBpbnN0YW5jZSBpbiB0aGlzIHdheSBpcyBmYXN0ZXIgdGhhbiBjYWxsaW5nIGBPYmplY3QuY3JlYXRlKG51bGwpYCBkaXJlY3RseS5cbi8vIElmIGBPYmplY3QuY3JlYXRlKG51bGwpYCBpcyBub3Qgc3VwcG9ydGVkIHdlIHByZWZpeCB0aGUgZXZlbnQgbmFtZXMgd2l0aCBhXG4vLyBjaGFyYWN0ZXIgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGJ1aWx0LWluIG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBub3Rcbi8vIG92ZXJyaWRkZW4gb3IgdXNlZCBhcyBhbiBhdHRhY2sgdmVjdG9yLlxuLy9cbmlmIChPYmplY3QuY3JlYXRlKSB7XG4gIEV2ZW50cy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIC8vXG4gIC8vIFRoaXMgaGFjayBpcyBuZWVkZWQgYmVjYXVzZSB0aGUgYF9fcHJvdG9fX2AgcHJvcGVydHkgaXMgc3RpbGwgaW5oZXJpdGVkIGluXG4gIC8vIHNvbWUgb2xkIGJyb3dzZXJzIGxpa2UgQW5kcm9pZCA0LCBpUGhvbmUgNS4xLCBPcGVyYSAxMSBhbmQgU2FmYXJpIDUuXG4gIC8vXG4gIGlmICghbmV3IEV2ZW50cygpLl9fcHJvdG9fXykgcHJlZml4ID0gZmFsc2U7XG59XG5cbi8qKlxuICogUmVwcmVzZW50YXRpb24gb2YgYSBzaW5nbGUgZXZlbnQgbGlzdGVuZXIuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29uY2U9ZmFsc2VdIFNwZWNpZnkgaWYgdGhlIGxpc3RlbmVyIGlzIGEgb25lLXRpbWUgbGlzdGVuZXIuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIEVFKGZuLCBjb250ZXh0LCBvbmNlKSB7XG4gIHRoaXMuZm4gPSBmbjtcbiAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgdGhpcy5vbmNlID0gb25jZSB8fCBmYWxzZTtcbn1cblxuLyoqXG4gKiBBZGQgYSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50RW1pdHRlcn0gZW1pdHRlciBSZWZlcmVuY2UgdG8gdGhlIGBFdmVudEVtaXR0ZXJgIGluc3RhbmNlLlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gb25jZSBTcGVjaWZ5IGlmIHRoZSBsaXN0ZW5lciBpcyBhIG9uZS10aW1lIGxpc3RlbmVyLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFkZExpc3RlbmVyKGVtaXR0ZXIsIGV2ZW50LCBmbiwgY29udGV4dCwgb25jZSkge1xuICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVyID0gbmV3IEVFKGZuLCBjb250ZXh0IHx8IGVtaXR0ZXIsIG9uY2UpXG4gICAgLCBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXG4gIGlmICghZW1pdHRlci5fZXZlbnRzW2V2dF0pIGVtaXR0ZXIuX2V2ZW50c1tldnRdID0gbGlzdGVuZXIsIGVtaXR0ZXIuX2V2ZW50c0NvdW50Kys7XG4gIGVsc2UgaWYgKCFlbWl0dGVyLl9ldmVudHNbZXZ0XS5mbikgZW1pdHRlci5fZXZlbnRzW2V2dF0ucHVzaChsaXN0ZW5lcik7XG4gIGVsc2UgZW1pdHRlci5fZXZlbnRzW2V2dF0gPSBbZW1pdHRlci5fZXZlbnRzW2V2dF0sIGxpc3RlbmVyXTtcblxuICByZXR1cm4gZW1pdHRlcjtcbn1cblxuLyoqXG4gKiBDbGVhciBldmVudCBieSBuYW1lLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRFbWl0dGVyfSBlbWl0dGVyIFJlZmVyZW5jZSB0byB0aGUgYEV2ZW50RW1pdHRlcmAgaW5zdGFuY2UuXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZ0IFRoZSBFdmVudCBuYW1lLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2xlYXJFdmVudChlbWl0dGVyLCBldnQpIHtcbiAgaWYgKC0tZW1pdHRlci5fZXZlbnRzQ291bnQgPT09IDApIGVtaXR0ZXIuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgZWxzZSBkZWxldGUgZW1pdHRlci5fZXZlbnRzW2V2dF07XG59XG5cbi8qKlxuICogTWluaW1hbCBgRXZlbnRFbWl0dGVyYCBpbnRlcmZhY2UgdGhhdCBpcyBtb2xkZWQgYWdhaW5zdCB0aGUgTm9kZS5qc1xuICogYEV2ZW50RW1pdHRlcmAgaW50ZXJmYWNlLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xufVxuXG4vKipcbiAqIFJldHVybiBhbiBhcnJheSBsaXN0aW5nIHRoZSBldmVudHMgZm9yIHdoaWNoIHRoZSBlbWl0dGVyIGhhcyByZWdpc3RlcmVkXG4gKiBsaXN0ZW5lcnMuXG4gKlxuICogQHJldHVybnMge0FycmF5fVxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICB2YXIgbmFtZXMgPSBbXVxuICAgICwgZXZlbnRzXG4gICAgLCBuYW1lO1xuXG4gIGlmICh0aGlzLl9ldmVudHNDb3VudCA9PT0gMCkgcmV0dXJuIG5hbWVzO1xuXG4gIGZvciAobmFtZSBpbiAoZXZlbnRzID0gdGhpcy5fZXZlbnRzKSkge1xuICAgIGlmIChoYXMuY2FsbChldmVudHMsIG5hbWUpKSBuYW1lcy5wdXNoKHByZWZpeCA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lKTtcbiAgfVxuXG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgcmV0dXJuIG5hbWVzLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGV2ZW50cykpO1xuICB9XG5cbiAgcmV0dXJuIG5hbWVzO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIGxpc3RlbmVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtBcnJheX0gVGhlIHJlZ2lzdGVyZWQgbGlzdGVuZXJzLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyhldmVudCkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudFxuICAgICwgaGFuZGxlcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAoIWhhbmRsZXJzKSByZXR1cm4gW107XG4gIGlmIChoYW5kbGVycy5mbikgcmV0dXJuIFtoYW5kbGVycy5mbl07XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBoYW5kbGVycy5sZW5ndGgsIGVlID0gbmV3IEFycmF5KGwpOyBpIDwgbDsgaSsrKSB7XG4gICAgZWVbaV0gPSBoYW5kbGVyc1tpXS5mbjtcbiAgfVxuXG4gIHJldHVybiBlZTtcbn07XG5cbi8qKlxuICogUmV0dXJuIHRoZSBudW1iZXIgb2YgbGlzdGVuZXJzIGxpc3RlbmluZyB0byBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1iZXIgb2YgbGlzdGVuZXJzLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbiBsaXN0ZW5lckNvdW50KGV2ZW50KSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50XG4gICAgLCBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAoIWxpc3RlbmVycykgcmV0dXJuIDA7XG4gIGlmIChsaXN0ZW5lcnMuZm4pIHJldHVybiAxO1xuICByZXR1cm4gbGlzdGVuZXJzLmxlbmd0aDtcbn07XG5cbi8qKlxuICogQ2FsbHMgZWFjaCBvZiB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZXZlbnQgaGFkIGxpc3RlbmVycywgZWxzZSBgZmFsc2VgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KGV2ZW50LCBhMSwgYTIsIGEzLCBhNCwgYTUpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbZXZ0XSkgcmV0dXJuIGZhbHNlO1xuXG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XVxuICAgICwgbGVuID0gYXJndW1lbnRzLmxlbmd0aFxuICAgICwgYXJnc1xuICAgICwgaTtcblxuICBpZiAobGlzdGVuZXJzLmZuKSB7XG4gICAgaWYgKGxpc3RlbmVycy5vbmNlKSB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcnMuZm4sIHVuZGVmaW5lZCwgdHJ1ZSk7XG5cbiAgICBzd2l0Y2ggKGxlbikge1xuICAgICAgY2FzZSAxOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQpLCB0cnVlO1xuICAgICAgY2FzZSAyOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExKSwgdHJ1ZTtcbiAgICAgIGNhc2UgMzogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIpLCB0cnVlO1xuICAgICAgY2FzZSA0OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMpLCB0cnVlO1xuICAgICAgY2FzZSA1OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMsIGE0KSwgdHJ1ZTtcbiAgICAgIGNhc2UgNjogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzLCBhNCwgYTUpLCB0cnVlO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDEsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0xKTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG5cbiAgICBsaXN0ZW5lcnMuZm4uYXBwbHkobGlzdGVuZXJzLmNvbnRleHQsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoXG4gICAgICAsIGo7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChsaXN0ZW5lcnNbaV0ub25jZSkgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXJzW2ldLmZuLCB1bmRlZmluZWQsIHRydWUpO1xuXG4gICAgICBzd2l0Y2ggKGxlbikge1xuICAgICAgICBjYXNlIDE6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0KTsgYnJlYWs7XG4gICAgICAgIGNhc2UgMjogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExKTsgYnJlYWs7XG4gICAgICAgIGNhc2UgMzogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExLCBhMik7IGJyZWFrO1xuICAgICAgICBjYXNlIDQ6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSwgYTIsIGEzKTsgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKCFhcmdzKSBmb3IgKGogPSAxLCBhcmdzID0gbmV3IEFycmF5KGxlbiAtMSk7IGogPCBsZW47IGorKykge1xuICAgICAgICAgICAgYXJnc1tqIC0gMV0gPSBhcmd1bWVudHNbal07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGlzdGVuZXJzW2ldLmZuLmFwcGx5KGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuICogQWRkIGEgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBbY29udGV4dD10aGlzXSBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihldmVudCwgZm4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIGFkZExpc3RlbmVyKHRoaXMsIGV2ZW50LCBmbiwgY29udGV4dCwgZmFsc2UpO1xufTtcblxuLyoqXG4gKiBBZGQgYSBvbmUtdGltZSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IFtjb250ZXh0PXRoaXNdIFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZShldmVudCwgZm4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIGFkZExpc3RlbmVyKHRoaXMsIGV2ZW50LCBmbiwgY29udGV4dCwgdHJ1ZSk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSB0aGUgbGlzdGVuZXJzIG9mIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gT25seSByZW1vdmUgdGhlIGxpc3RlbmVycyB0aGF0IG1hdGNoIHRoaXMgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IGNvbnRleHQgT25seSByZW1vdmUgdGhlIGxpc3RlbmVycyB0aGF0IGhhdmUgdGhpcyBjb250ZXh0LlxuICogQHBhcmFtIHtCb29sZWFufSBvbmNlIE9ubHkgcmVtb3ZlIG9uZS10aW1lIGxpc3RlbmVycy5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKGV2ZW50LCBmbiwgY29udGV4dCwgb25jZSkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1tldnRdKSByZXR1cm4gdGhpcztcbiAgaWYgKCFmbikge1xuICAgIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAobGlzdGVuZXJzLmZuKSB7XG4gICAgaWYgKFxuICAgICAgbGlzdGVuZXJzLmZuID09PSBmbiAmJlxuICAgICAgKCFvbmNlIHx8IGxpc3RlbmVycy5vbmNlKSAmJlxuICAgICAgKCFjb250ZXh0IHx8IGxpc3RlbmVycy5jb250ZXh0ID09PSBjb250ZXh0KVxuICAgICkge1xuICAgICAgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpID0gMCwgZXZlbnRzID0gW10sIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKFxuICAgICAgICBsaXN0ZW5lcnNbaV0uZm4gIT09IGZuIHx8XG4gICAgICAgIChvbmNlICYmICFsaXN0ZW5lcnNbaV0ub25jZSkgfHxcbiAgICAgICAgKGNvbnRleHQgJiYgbGlzdGVuZXJzW2ldLmNvbnRleHQgIT09IGNvbnRleHQpXG4gICAgICApIHtcbiAgICAgICAgZXZlbnRzLnB1c2gobGlzdGVuZXJzW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIFJlc2V0IHRoZSBhcnJheSwgb3IgcmVtb3ZlIGl0IGNvbXBsZXRlbHkgaWYgd2UgaGF2ZSBubyBtb3JlIGxpc3RlbmVycy5cbiAgICAvL1xuICAgIGlmIChldmVudHMubGVuZ3RoKSB0aGlzLl9ldmVudHNbZXZ0XSA9IGV2ZW50cy5sZW5ndGggPT09IDEgPyBldmVudHNbMF0gOiBldmVudHM7XG4gICAgZWxzZSBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFsbCBsaXN0ZW5lcnMsIG9yIHRob3NlIG9mIHRoZSBzcGVjaWZpZWQgZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IFtldmVudF0gVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50KSB7XG4gIHZhciBldnQ7XG5cbiAgaWYgKGV2ZW50KSB7XG4gICAgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcbiAgICBpZiAodGhpcy5fZXZlbnRzW2V2dF0pIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9ldmVudHMgPSBuZXcgRXZlbnRzKCk7XG4gICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vL1xuLy8gQWxpYXMgbWV0aG9kcyBuYW1lcyBiZWNhdXNlIHBlb3BsZSByb2xsIGxpa2UgdGhhdC5cbi8vXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbjtcblxuLy9cbi8vIEV4cG9zZSB0aGUgcHJlZml4LlxuLy9cbkV2ZW50RW1pdHRlci5wcmVmaXhlZCA9IHByZWZpeDtcblxuLy9cbi8vIEFsbG93IGBFdmVudEVtaXR0ZXJgIHRvIGJlIGltcG9ydGVkIGFzIG1vZHVsZSBuYW1lc3BhY2UuXG4vL1xuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuLy9cbi8vIEV4cG9zZSB0aGUgbW9kdWxlLlxuLy9cbmlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIG1vZHVsZSkge1xuICBtb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcbn1cbiIsImltcG9ydCB7RXZlbnRFbWl0dGVyfSBmcm9tICdldmVudGVtaXR0ZXIzJztcbmltcG9ydCBzaHVmZmxlIGZyb20gJy4vc2h1ZmZsZSc7XG5pbXBvcnQge1xuICBURVRST01JTk9fSSxcbiAgVEVUUk9NSU5PX0osXG4gIFRFVFJPTUlOT19MLFxuICBURVRST01JTk9fTyxcbiAgVEVUUk9NSU5PX1MsXG4gIFRFVFJPTUlOT19ULFxuICBURVRST01JTk9fWlxufSBmcm9tICcuL3RldHJvbWlub2VzJztcbmltcG9ydCB7VGV0cm9taW5vLCBUZXRyb21pbm9Db250cm9sbGVyLCBUZXRyaXNPcHRpb24sIFBvaW50MmR9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IE1hdHJpeEJsb2NrIGZyb20gJy4vbWF0cml4LWJsb2NrJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGV0cmlzIHtcblxuICBtb3ZlczogbnVtYmVyID0gMDtcblxuICBpc1N0YXJ0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBsZXZlbDogbnVtYmVyID0gMTtcblxuICBzY29yZTogbnVtYmVyID0gMDtcblxuICBldmVudEVtaXR0ZXI6IGFueTtcblxuICBvcHRpb246IFRldHJpc09wdGlvbjtcblxuICBwaWVjZUNvdW50OiBudW1iZXIgPSAwO1xuXG4gIGRlbGF5OiBudW1iZXIgPSAxMDAwO1xuXG4gIHRpbWVyOiBudW1iZXI7XG5cbiAgY3VycmVudFBpZWNlOiBUZXRyb21pbm9Db250cm9sbGVyO1xuXG4gIHRldHJvbWlub2VzOiBUZXRyb21pbm9bXSA9IFtcbiAgICBURVRST01JTk9fTyxcbiAgICBURVRST01JTk9fSixcbiAgICBURVRST01JTk9fTCxcbiAgICBURVRST01JTk9fUyxcbiAgICBURVRST01JTk9fWixcbiAgICBURVRST01JTk9fVCxcbiAgICBURVRST01JTk9fSVxuICBdO1xuXG4gIHByb3RlY3RlZCBtYXRyaXg6IE1hdHJpeEJsb2NrW11bXTtcblxuICBjb25zdHJ1Y3RvcihvcHRpb246IFRldHJpc09wdGlvbikge1xuICAgIHRoaXMub3B0aW9uID0gb3B0aW9uO1xuICAgIHRoaXMuZXZlbnRFbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICB9XG5cbiAgZHJhdygpIHtcbiAgfVxuXG4gIGluaXRNYXRyaXgoKSB7XG5cbiAgICBjb25zdCB7d2lkdGgsIGhlaWdodH0gPSB0aGlzLm9wdGlvbjtcbiAgICB0aGlzLm1hdHJpeCA9IFtdO1xuXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IGhlaWdodDsgaSsrKSB7XG4gICAgICBpZiAoISBBcnJheS5pc0FycmF5KHRoaXMubWF0cml4W2ldKSkge1xuICAgICAgICB0aGlzLm1hdHJpeFtpXSA9IFtdO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgajogbnVtYmVyID0gMDsgaiA8IHdpZHRoOyBqKyspIHtcbiAgICAgICAgdGhpcy5tYXRyaXhbaV1bal0gPSBuZXcgTWF0cml4QmxvY2soKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXROZXdCbG9jaygpIHtcblxuICAgIGNvbnN0IFtyYW5kb21CbG9ja10gPSBzaHVmZmxlKHRoaXMudGV0cm9taW5vZXMpO1xuICAgIGNvbnN0IFtjb29yZF0gPSBzaHVmZmxlKHJhbmRvbUJsb2NrLmNvb3Jkcyk7XG5cbiAgICB0aGlzLnBpZWNlQ291bnQgKz0gMTtcblxuICAgIHRoaXMuY3VycmVudFBpZWNlID0ge1xuICAgICAgaWQ6IHRoaXMucGllY2VDb3VudCxcbiAgICAgIHRldHJvbWlubzogcmFuZG9tQmxvY2ssXG4gICAgICBjb29yZCxcbiAgICAgIHBvczoge3g6IDQsIHk6IDB9LFxuICAgICAgZ2V0UG9zQXJyKHBvcyA9IHRoaXMucG9zLCBjb29yZCA9IHRoaXMuY29vcmQpIHtcbiAgICAgICAgcmV0dXJuIGNvb3JkLm1hcCgoW3gsIHldKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IHBvcy54ICsgeCxcbiAgICAgICAgICAgIHk6IHBvcy55ICsgeVxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHJvdGF0ZUluZGV4OiAwXG4gICAgfTtcbiAgfVxuXG4gIGNhblBsYWNlQmxvY2tzKHBvc0FycjogUG9pbnQyZFtdKSB7XG5cbiAgICByZXR1cm4gcG9zQXJyLmV2ZXJ5KHBvcyA9PiB7XG4gICAgICBpZiAoISAocG9zLnkgaW4gdGhpcy5tYXRyaXgpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJsb2NrID0gdGhpcy5tYXRyaXhbcG9zLnldW3Bvcy54XTtcbiAgICAgIGlmIChibG9jayAmJiBibG9jay5pc0VtcHR5KCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoYmxvY2sgJiYgYmxvY2suaWQgPT09IHRoaXMuY3VycmVudFBpZWNlLmlkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICB9XG5cbiAgZXJhc2VCbG9ja3MoaWQ6IG51bWJlcikge1xuICAgIHRoaXMubWF0cml4Lm1hcChyb3cgPT4gcm93Lm1hcChibG9jayA9PiAoYmxvY2suaWQgPT09IGlkKSA/IGJsb2NrLnNldEVtcHR5KCkgOiBibG9jaykpO1xuICB9XG5cbiAgY2FuVGhyb3dOZXdCbG9jaygpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50UGllY2UuZ2V0UG9zQXJyKClcbiAgICAgIC5ldmVyeShwb3MgPT4gdGhpcy5tYXRyaXhbcG9zLnldW3Bvcy54XS5pc0VtcHR5KCkpO1xuICB9XG5cbiAgc2V0QmxvY2tzKHBvc0FycjogUG9pbnQyZFtdLCBwaWVjZTogVGV0cm9taW5vQ29udHJvbGxlcikge1xuICAgIHBvc0Fyci5mb3JFYWNoKCh7eCwgeX0pID0+IHtcbiAgICAgIHRoaXMubWF0cml4W3ldW3hdID0gbmV3IE1hdHJpeEJsb2NrKHBpZWNlLmlkLCBwaWVjZS50ZXRyb21pbm8ubGFiZWwpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xlYXJSb3dJZk5lZWRlZCgpIHtcblxuICAgIGNvbnN0IHttYXRyaXgsIGxldmVsfSA9IHRoaXM7XG4gICAgY29uc3Qge3dpZHRoLCBoZWlnaHR9ID0gdGhpcy5vcHRpb247XG4gICAgY29uc3Qgc2NvcmVUaGlzUm91bmQgPSBtYXRyaXguZmlsdGVyKHJvdyA9PiByb3cuZXZlcnkoYmxvY2sgPT4gISBibG9jay5pc0VtcHR5KCkpKS5sZW5ndGggKiB3aWR0aCAqIGxldmVsO1xuICAgIGNvbnN0IGNsZWFyZWRSb3dzID0gbWF0cml4LmZpbHRlcihyb3cgPT4gcm93LnNvbWUoYmxvY2sgPT4gYmxvY2suaXNFbXB0eSgpKSk7XG4gICAgY29uc3Qgc3RhcnQgPSBoZWlnaHQgLSBjbGVhcmVkUm93cy5sZW5ndGg7XG4gICAgdGhpcy5tYXRyaXggPSBtYXRyaXgubWFwKChyb3csIGkpID0+IHtcbiAgICAgIGlmIChpIDwgc3RhcnQpIHtcbiAgICAgICAgcmV0dXJuIHJvdy5tYXAoYmxvY2sgPT4gYmxvY2suc2V0RW1wdHkoKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2xlYXJlZFJvd3NbaSAtIHN0YXJ0XTtcbiAgICB9KTtcblxuICAgIHRoaXMuc2NvcmUgKz0gc2NvcmVUaGlzUm91bmQ7XG4gICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgnY2hhbmdlJyk7XG4gIH1cblxuICBjaGFuZ2VMZXZlbElmTmVlZGVkKCkge1xuICAgIGNvbnN0IG5ld0xldmVsID0gTWF0aC5jZWlsKHRoaXMubW92ZXMgLyAyMCk7XG4gICAgaWYgKHRoaXMubGV2ZWwgIT0gbmV3TGV2ZWwpIHtcbiAgICAgIHRoaXMubGV2ZWwgPSBuZXdMZXZlbDtcbiAgICAgIGNvbnN0IG5ld0RlbGF5ID0gMTAwMCAtIChuZXdMZXZlbCAqIDUwKTtcbiAgICAgIHRoaXMuZGVsYXkgPSBuZXdEZWxheSA8PSA0MDAgPyA0MDAgOiBuZXdEZWxheTtcbiAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ2NoYW5nZScpO1xuICAgIH1cbiAgfVxuXG4gIHRocm93TmV3QmxvY2soKSB7XG5cbiAgICBjb25zdCBzZXRNb3ZpbmdCbG9jayA9ICgpID0+IHtcblxuICAgICAgY29uc3Qge2N1cnJlbnRQaWVjZX0gPSB0aGlzO1xuICAgICAgY29uc3QgcG9zQXJyID0gY3VycmVudFBpZWNlLmdldFBvc0FycigpO1xuXG4gICAgICB0aGlzLmVyYXNlQmxvY2tzKGN1cnJlbnRQaWVjZS5pZCk7XG5cbiAgICAgIGlmICh0aGlzLmNhblBsYWNlQmxvY2tzKHBvc0FycikpIHtcblxuICAgICAgICB0aGlzLm1vdmVzICs9IDE7XG4gICAgICAgIHRoaXMuY2hhbmdlTGV2ZWxJZk5lZWRlZCgpO1xuICAgICAgICB0aGlzLnNldEJsb2Nrcyhwb3NBcnIsIGN1cnJlbnRQaWVjZSk7XG5cbiAgICAgICAgY29uc3QgbmV4dFBvc0FyciA9IGN1cnJlbnRQaWVjZS5nZXRQb3NBcnIoe1xuICAgICAgICAgIHg6IGN1cnJlbnRQaWVjZS5wb3MueCxcbiAgICAgICAgICB5OiBjdXJyZW50UGllY2UucG9zLnkgKyAxXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLmNhblBsYWNlQmxvY2tzKG5leHRQb3NBcnIpKSB7XG4gICAgICAgICAgY3VycmVudFBpZWNlLnBvcy55ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcbiAgICAgICAgICB0aGlzLnNldE5ld0Jsb2NrKCk7XG5cbiAgICAgICAgICBpZiAodGhpcy5jYW5UaHJvd05ld0Jsb2NrKCkpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJSb3dJZk5lZWRlZCgpO1xuICAgICAgICAgICAgdGhpcy50aHJvd05ld0Jsb2NrKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZ2FtZU92ZXIoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKHNldE1vdmluZ0Jsb2NrLCB0aGlzLmRlbGF5KTtcbiAgfVxuXG4gIG1vdmVDdXJyZW50UGllY2VUb0xlZnQoKSB7XG4gICAgY29uc3Qge2N1cnJlbnRQaWVjZX0gPSB0aGlzO1xuICAgIGNvbnN0IG5leHRQb3NBcnIgPSBjdXJyZW50UGllY2UuZ2V0UG9zQXJyKHtcbiAgICAgIHg6IGN1cnJlbnRQaWVjZS5wb3MueCAtIDEsXG4gICAgICB5OiBjdXJyZW50UGllY2UucG9zLnlcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmNhblBsYWNlQmxvY2tzKG5leHRQb3NBcnIpKSB7XG4gICAgICB0aGlzLmVyYXNlQmxvY2tzKGN1cnJlbnRQaWVjZS5pZCk7XG4gICAgICBjdXJyZW50UGllY2UucG9zLnggLT0gMTtcbiAgICAgIHRoaXMuc2V0QmxvY2tzKG5leHRQb3NBcnIsIGN1cnJlbnRQaWVjZSk7XG4gICAgfVxuICB9XG5cbiAgbW92ZUN1cnJlbnRQaWVjZVRvUmlnaHQoKSB7XG4gICAgY29uc3Qge2N1cnJlbnRQaWVjZX0gPSB0aGlzO1xuICAgIGNvbnN0IG5leHRQb3NBcnIgPSBjdXJyZW50UGllY2UuZ2V0UG9zQXJyKHtcbiAgICAgIHg6IGN1cnJlbnRQaWVjZS5wb3MueCArIDEsXG4gICAgICB5OiBjdXJyZW50UGllY2UucG9zLnlcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmNhblBsYWNlQmxvY2tzKG5leHRQb3NBcnIpKSB7XG4gICAgICB0aGlzLmVyYXNlQmxvY2tzKGN1cnJlbnRQaWVjZS5pZCk7XG4gICAgICBjdXJyZW50UGllY2UucG9zLnggKz0gMTtcbiAgICAgIHRoaXMuc2V0QmxvY2tzKG5leHRQb3NBcnIsIGN1cnJlbnRQaWVjZSk7XG4gICAgfVxuICB9XG5cbiAgbW92ZUN1cnJlbnRQaWVjZVRvQm90dG9tKCkge1xuXG4gICAgY29uc3Qge2N1cnJlbnRQaWVjZX0gPSB0aGlzO1xuICAgIGNvbnN0IG5leHRQb3NBcnIgPSBjdXJyZW50UGllY2UuZ2V0UG9zQXJyKHtcbiAgICAgIHg6IGN1cnJlbnRQaWVjZS5wb3MueCxcbiAgICAgIHk6IGN1cnJlbnRQaWVjZS5wb3MueSArIDFcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmNhblBsYWNlQmxvY2tzKG5leHRQb3NBcnIpKSB7XG4gICAgICB0aGlzLmVyYXNlQmxvY2tzKGN1cnJlbnRQaWVjZS5pZCk7XG4gICAgICBjdXJyZW50UGllY2UucG9zLnkgKz0gMTtcbiAgICAgIHRoaXMuc2V0QmxvY2tzKG5leHRQb3NBcnIsIGN1cnJlbnRQaWVjZSk7XG4gICAgfVxuICB9XG5cbiAgcm90YXRlQ3VycmVudFBpZWNlKCkge1xuICAgIGNvbnN0IHtjdXJyZW50UGllY2V9ID0gdGhpcztcbiAgICBjb25zdCBuZXh0Um90YXRlSW5kZXggPSAoY3VycmVudFBpZWNlLnJvdGF0ZUluZGV4ICsgMSkgJSBjdXJyZW50UGllY2UudGV0cm9taW5vLmNvb3Jkcy5sZW5ndGg7XG4gICAgY29uc3QgbmV4dENvb3JkID0gY3VycmVudFBpZWNlLnRldHJvbWluby5jb29yZHNbbmV4dFJvdGF0ZUluZGV4XTtcbiAgICBjb25zdCBuZXh0UG9zQXJyID0gY3VycmVudFBpZWNlLmdldFBvc0FycihjdXJyZW50UGllY2UucG9zLCBuZXh0Q29vcmQpO1xuXG4gICAgaWYgKHRoaXMuY2FuUGxhY2VCbG9ja3MobmV4dFBvc0FycikpIHtcbiAgICAgIHRoaXMuZXJhc2VCbG9ja3MoY3VycmVudFBpZWNlLmlkKTtcbiAgICAgIGN1cnJlbnRQaWVjZS5yb3RhdGVJbmRleCA9IG5leHRSb3RhdGVJbmRleDtcbiAgICAgIGN1cnJlbnRQaWVjZS5jb29yZCA9IGN1cnJlbnRQaWVjZS50ZXRyb21pbm8uY29vcmRzW25leHRSb3RhdGVJbmRleF07XG4gICAgICB0aGlzLnNldEJsb2NrcyhuZXh0UG9zQXJyLCBjdXJyZW50UGllY2UpO1xuICAgIH1cbiAgfVxuXG4gIG9uKGV2ZW50OiBzdHJpbmcsIGZ1bmMpIHtcbiAgICB0aGlzLmV2ZW50RW1pdHRlci5vbihldmVudCwgZnVuYyk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuZXZlbnRFbWl0dGVyLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgdGhpcy5pc1N0YXJ0ZWQgPSB0cnVlO1xuICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ2dhbWVzdGFydCcpO1xuICAgIHRoaXMuaW5pdE1hdHJpeCgpO1xuICAgIHRoaXMuc2V0TmV3QmxvY2soKTtcbiAgICB0aGlzLnRocm93TmV3QmxvY2soKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2FtZU92ZXIoKSB7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcbiAgICB0aGlzLmlzU3RhcnRlZCA9IGZhbHNlO1xuICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ2dhbWVvdmVyJyk7XG4gIH1cbn1cbiIsImltcG9ydCBUZXRyaXMgZnJvbSAnLi90ZXRyaXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXRyaXNEb20gZXh0ZW5kcyBUZXRyaXMge1xuXG4gIHByaXZhdGUgZWxlbWVudDogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBpc0FuaW1hdGluZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgbGFzdEh0bWw6IHN0cmluZyA9ICcnO1xuXG4gIHByaXZhdGUgYmluZGVkSGFuZGxlS2V5RG93bjogKCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihlbGVtZW50OiBIVE1MRWxlbWVudCwgb3B0aW9ucykge1xuICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgZHJhdygpIHtcbiAgICBjb25zdCB7ZWxlbWVudH0gPSB0aGlzO1xuICAgIGNvbnN0IHt3aWR0aCwgaGVpZ2h0fSA9IHRoaXMub3B0aW9uO1xuICAgIGNvbnN0IGh0bWwgPSB0aGlzLm1hdHJpeC5tYXAocm93ID0+IHtcbiAgICAgIGNvbnN0IHRkcyA9IHJvdy5tYXAoYmxvY2sgPT4gYDx0ZCBjbGFzcz1cImNvbG9yLSR7YmxvY2subGFiZWx9XCI+PC90ZD5gKS5qb2luKCcnKTtcbiAgICAgIHJldHVybiBgPHRyPiR7dGRzfTwvdHI+YDtcbiAgICB9KS5qb2luKCcnKTtcblxuICAgIGlmICh0aGlzLmxhc3RIdG1sICE9PSBodG1sKSB7XG4gICAgICBlbGVtZW50LmlubmVySFRNTCA9IGh0bWw7XG4gICAgICB0aGlzLmxhc3RIdG1sID0gaHRtbDtcbiAgICB9XG4gIH1cblxuICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLmJpbmRlZEhhbmRsZUtleURvd24gPSB0aGlzLmhhbmRsZUtleURvd24uYmluZCh0aGlzKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5iaW5kZWRIYW5kbGVLZXlEb3duLCBmYWxzZSk7XG4gIH1cblxuICBoYW5kbGVLZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG5cbiAgICBpZiAoISB0aGlzLmlzU3RhcnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHtjb2RlfSA9IGV2ZW50O1xuXG4gICAgaWYgKCdBcnJvd0xlZnQnID09PSBjb2RlKSB7XG4gICAgICB0aGlzLm1vdmVDdXJyZW50UGllY2VUb0xlZnQoKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoJ0Fycm93UmlnaHQnID09PSBjb2RlKSB7XG4gICAgICB0aGlzLm1vdmVDdXJyZW50UGllY2VUb1JpZ2h0KCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCdBcnJvd0Rvd24nID09PSBjb2RlKSB7XG4gICAgICB0aGlzLm1vdmVDdXJyZW50UGllY2VUb0JvdHRvbSgpO1xuICAgIH1cbiAgICBlbHNlIGlmIChbJ0Fycm93VXAnLCAnU3BhY2UnXS5pbmNsdWRlcyhjb2RlKSkge1xuICAgICAgdGhpcy5yb3RhdGVDdXJyZW50UGllY2UoKTtcbiAgICB9XG4gIH1cblxuICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5iaW5kZWRIYW5kbGVLZXlEb3duLCBmYWxzZSk7XG4gIH1cblxuICBzdGFydEFuaW1hdGlvbkxvb3AoKSB7XG5cbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBzZWxmLmlzQW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgIGZ1bmN0aW9uIGxvb3AoKSB7XG5cbiAgICAgIGlmICghIHNlbGYuaXNBbmltYXRpbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VsZi5kcmF3KCk7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4gICAgfVxuICAgIGxvb3AoKTtcbiAgfVxuXG4gIHN0b3BBbmltYXRpb25Mb29wKCkge1xuICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIHN1cGVyLnN0YXJ0KCk7XG4gICAgdGhpcy5zdGFydEFuaW1hdGlvbkxvb3AoKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIHRoaXMuc3RvcEFuaW1hdGlvbkxvb3AoKTtcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImltcG9ydCBUZXRyaXNEb20gZnJvbSAnLi90ZXRyaXMtZG9tJztcblxuY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXRyaXgnKTtcbmNvbnN0IGdhbWUgPSBuZXcgVGV0cmlzRG9tKGVsZW1lbnQsIHt3aWR0aDogMTAsIGhlaWdodDogMjB9KTtcbmNvbnN0IHBhZ2VIb21lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2UtaG9tZScpO1xuY29uc3QgcGFnZUdhbWVPdmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2UtZ2FtZS1vdmVyJyk7XG5jb25zdCBidG5TdGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tc3RhcnQnKTtcbmNvbnN0IGJ0blBsYXlBZ2FpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tcGxheS1hZ2FpbicpO1xuY29uc3QgdG9wYmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvcGJhcicpO1xuY29uc3QgdG9wYmFyTGV2ZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9wYmFyLWxldmVsJyk7XG5jb25zdCB0b3BiYXJTY29yZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3BiYXItc2NvcmUnKTtcbmNvbnN0IHBhZFNjb3JlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZC1zY29yZScpO1xuXG5nYW1lLm9uKCdnYW1lc3RhcnQnLCAoKSA9PiB7XG4gIHRvcGJhckxldmVsLnRleHRDb250ZW50ID0gYExldmVsOiAke2dhbWUubGV2ZWx9YDtcbiAgdG9wYmFyU2NvcmUudGV4dENvbnRlbnQgPSBgU2NvcmU6ICR7Z2FtZS5zY29yZX1gO1xufSk7XG5cbmdhbWUub24oJ2NoYW5nZScsICgpID0+IHtcbiAgdG9wYmFyTGV2ZWwudGV4dENvbnRlbnQgPSBgTGV2ZWw6ICR7Z2FtZS5sZXZlbH1gO1xuICB0b3BiYXJTY29yZS50ZXh0Q29udGVudCA9IGBTY29yZTogJHtnYW1lLnNjb3JlfWA7XG59KTtcblxuZ2FtZS5vbignZ2FtZW92ZXInLCAoKSA9PiB7XG4gIHBhZ2VHYW1lT3Zlci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgcGFkU2NvcmUuaW5uZXJIVE1MID0gYFlvdXIgU2NvcmU6ICR7Z2FtZS5zY29yZX1gO1xufSk7XG5cbmNvbnN0IHN0YXJ0R2FtZSA9ICgpID0+IHtcbiAgZ2FtZS5zdGFydCgpXG4gIHRvcGJhci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgcGFnZUhvbWUuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gIHBhZ2VHYW1lT3Zlci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbn07XG5cbmJ0blN0YXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RhcnRHYW1lLCBmYWxzZSk7XG5idG5QbGF5QWdhaW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdGFydEdhbWUsIGZhbHNlKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=